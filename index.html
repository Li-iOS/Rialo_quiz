<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rialo 测试题</title>
    
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="https://unpkg.com/3d-force-graph@1.73.1/dist/3d-force-graph.min.js"></script>

<style>
        body { margin: 0; overflow: hidden; background-color: #000005; font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif; }
        #3d-graph { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* =========================================
           新增加的大标题样式 (Intro Title)
           ========================================= */
        #intro-title-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none; /* 让鼠标点击可以穿透标题，不影响操作 */
            z-index: 2000; /* 保证在最上层 */
            perspective: 1000px;
        }

        .intro-text {
            font-size: 5vw; /* 响应式字体大小 */
            font-weight: 900;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 10px;
            text-align: center;
            opacity: 0;
            
            /* 文字描边和发光效果 */
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.6), 0 0 50px rgba(0, 243, 255, 0.4);
            background: linear-gradient(180deg, #fff 0%, #a2f9ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            
            /* 动画定义 */
            animation: titleSequence 5s ease-out forwards;
        }

        /* 副标题小字 */
        .intro-sub {
            display: block;
            font-size: 1.2rem;
            letter-spacing: 5px;
            color: #00f3ff;
            margin-top: 10px;
            opacity: 0;
            font-weight: 400;
            -webkit-text-fill-color: #00f3ff; /* 重置填充色 */
            animation: subTitleSequence 5s ease-out forwards;
        }

        @keyframes titleSequence {
            0% { opacity: 0; transform: scale(0.8) translateY(20px); filter: blur(10px); letter-spacing: 30px; }
            20% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0px); letter-spacing: 10px; }
            70% { opacity: 1; transform: scale(1.05); filter: blur(0px); }
            100% { opacity: 0; transform: scale(1.5); filter: blur(20px); letter-spacing: 20px; }
        }

        @keyframes subTitleSequence {
            0%, 20% { opacity: 0; transform: translateY(10px); }
            30% { opacity: 0.8; transform: translateY(0); }
            70% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(-10px); }
        }

        /* Loading */
        #loading {
            position: fixed; inset: 0; background: #000005; z-index: 999;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            color: #00f3ff; transition: opacity 1s; pointer-events: none;
        }
        .loader-ring {
            width: 50px; height: 50px; border: 3px solid rgba(0, 243, 255, 0.3);
            border-top-color: #00f3ff; border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* HUD */
        #hud {
            position: absolute; top: 20px; left: 20px; z-index: 10;
            background: rgba(0, 10, 30, 0.7); border: 1px solid rgba(0, 243, 255, 0.3);
            padding: 15px; border-radius: 12px; backdrop-filter: blur(8px);
            color: #fff; width: 220px; pointer-events: none;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
        }
        .hud-title { color: #00f3ff; font-weight: 700; letter-spacing: 1px; margin-bottom: 10px; font-size: 14px; text-transform: uppercase; }
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 13px; }
        .stat-val { font-family: 'Courier New', monospace; font-weight: bold; }
        .bar-bg { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 10px; overflow: hidden; }
        .bar-fill { height: 100%; background: #00f3ff; width: 0%; transition: width 0.5s; box-shadow: 0 0 8px #00f3ff; }

        /* Reset Button */
        #reset-progress{
            position: absolute; top: 180px; left: 20px; z-index: 11;
            padding: 10px 14px; border-radius: 10px;
            background: rgba(0,10,30,0.65); border: 1px solid rgba(0,243,255,0.25);
            color: #00f3ff; font-weight: 700; cursor: pointer; backdrop-filter: blur(8px);
            font-size: 14px;
        }
        #reset-progress:hover{ background: rgba(0,243,255,0.12); }

        /* Panel */
        #panel {
            position: fixed; right: -480px; top: 0; width: 420px; height: 100%;
            background: rgba(5, 10, 25, 0.95); border-left: 1px solid rgba(0, 243, 255, 0.2);
            backdrop-filter: blur(15px); z-index: 20; transition: right 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            display: flex; flex-direction: column; box-shadow: -10px 0 40px rgba(0,0,0,0.8);
        }
        #panel.active { right: 0; }
        .panel-content { padding: 30px; overflow-y: auto; flex: 1; }
        .q-tag { color: #00f3ff; font-size: 12px; border: 1px solid rgba(0, 243, 255, 0.3); padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 15px; }
        .q-text { font-size: 18px; line-height: 1.6; color: #eef; margin-bottom: 30px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .opt-btn {
            background: linear-gradient(90deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
            border: 1px solid rgba(255,255,255,0.1); padding: 16px; margin-bottom: 12px;
            color: #ccc; cursor: pointer; border-radius: 8px; transition: 0.3s;
        }
        .opt-btn:hover:not(.disabled) { border-color: #00f3ff; color: #fff; background: rgba(0, 243, 255, 0.1); }
        .opt-btn.correct { border-color: #00ff88; background: rgba(0, 255, 136, 0.2); color: #fff; }
        .opt-btn.wrong { border-color: #ff3366; background: rgba(255, 51, 102, 0.15); color: #aaa; text-decoration: line-through; opacity: 0.7; }
        .opt-btn.disabled { cursor: default; pointer-events: none; }
        .close-btn { position: absolute; top: 20px; right: 20px; color: #555; cursor: pointer; font-size: 24px; }
        .close-btn:hover { color: #fff; }

        /* Feedback */
        #feedback { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold; opacity: 0; transition: opacity 0.5s; }
        .fb-win { background: rgba(0, 255, 136, 0.1); color: #00ff88; border: 1px solid rgba(0, 255, 136, 0.3); }
        .fb-lose { background: rgba(255, 51, 102, 0.1); color: #ff3366; border: 1px solid rgba(255, 51, 102, 0.3); }
        .fb-recover { background: rgba(255, 200, 0, 0.1); color: #ffcc00; border: 1px solid rgba(255, 200, 0, 0.3); }

        /* Background */
        body::before{
            content:""; position:fixed; inset:0; pointer-events:none;
            background: radial-gradient(1200px 800px at 18% 28%, rgba(120,85,255,0.18), transparent 62%),
                        linear-gradient(180deg, #000008 0%, #000010 60%, #000008 100%);
            z-index:0;
        }
        #3d-graph{ position:relative; z-index:1; }
    </style>
</head>
<body>

    <div id="intro-title-container">
        <div class="intro-text">
            欢迎来到 RIALO 测试
            <span class="intro-sub">Confidential Computation Galaxy</span>
        </div>
    </div>

    <div id="loading">
        <div class="loader-ring"></div>
        <div>宇宙初始化中...</div>
    </div>

    <div id="hud">
        <div class="hud-title">系统状态 (System Status)</div>
        <div class="stat-row"><span style="color:#666">节点总数</span> <span class="stat-val">85</span></div>
        <div class="stat-row"><span style="color:#00f3ff">未探索</span> <span class="stat-val" id="val-blue">85</span></div>
        <div class="stat-row"><span style="color:#00ff88">已修复</span> <span class="stat-val" id="val-green">0</span></div>
        <div class="stat-row"><span style="color:#ff3366">已损坏</span> <span class="stat-val" id="val-red">0</span></div>
        <div class="bar-bg"><div class="bar-fill" id="progress-bar"></div></div>
    </div>

    <button id="reset-progress">重置进度 (RESET)</button>

    <div id="3d-graph"></div>

    <div id="panel">
        <div class="close-btn" onclick="closePanel()">×</div>
        <div class="panel-content">
            <div class="q-tag" id="panel-id">节点信号 #01</div>
            <div class="q-text" id="panel-q">加载中...</div>
            <div id="panel-opts"></div>
            <div id="feedback"></div>
        </div>
    </div>

    <script>
        // ===========================================
        // 1. 数据 (已翻译为中文)
        // ===========================================
        const questionData = [
            { id: 1, q: "Rialo 社区叙事中最突出的核心价值是什么？", options: { A: "隐私与现实世界的融合", B: "短期利润最大化", C: "NFT 收藏", D: "以上全部" }, answer: "A", status: 'unanswered' },
            { id: 2, q: "Rialo 的核心基础设施重点是什么？", options: { A: "游戏 SDK", B: "NFT 铸造引擎", C: "底层机密计算 (Confidential Computation)", D: "借贷协议" }, answer: "C", status: 'unanswered' },
            { id: 3, q: "Rialo 旨在最大程度改善区块链使用的哪个方面？", options: { A: "永续合约 DEX", B: "带有隐私保护的现实世界采用", C: "AI 代理项目", D: "垃圾币交易" }, answer: "B", status: 'unanswered' },
            { id: 4, q: "隐私主要在 Rialo 架构的哪个层级实现？", options: { A: "协议层 (Protocol level)", B: "仅前端工具", C: "仅通过外部插件", D: "仅通过钱包" }, answer: "A", status: 'unanswered' },
            { id: 5, q: "推文中宣布了哪个钱包的集成？", options: { A: "Keplr", B: "MetaMask", C: "Phantom", D: "Trust Wallet" }, answer: "A", status: 'unanswered' },
            { id: 6, q: "更新中提到了哪个主要交易所？", options: { A: "Binance", B: "Coinbase", C: "Kraken", D: "Huobi" }, answer: "B", status: 'unanswered' },
            { id: 7, q: "根据推文，Rialo 试图反击哪种叙事？", options: { A: "加密货币投机的“闭环”", B: "AI 的崛起", C: "比特币的主导地位", D: "Meme 币的流行" }, answer: "A", status: 'unanswered' },
            { id: 8, q: "Rialo “水龙头 (faucet)” 的主要用途是什么？", options: { A: "分发主网代币", B: "为开发者/用户提供测试网代币", C: "出售代币", D: "销毁代币" }, answer: "B", status: 'unanswered' },
            { id: 9, q: "社区在 Telegram 投票中决定的事项是什么？", options: { A: "项目 Logo", B: "新功能", C: "官方代币符号 (Ticker)", D: "网站设计" }, answer: "C", status: 'unanswered' },
            { id: 10, q: "哪个代币符号赢得了社区投票？", options: { A: "$RIALO", B: "$RIO", C: "$RIA", D: "$RLO" }, answer: "B", status: 'unanswered' },
            { id: 11, q: "在 Rialo 的背景下，现有区块链透明度的主要挑战是什么？", options: { A: "太慢", B: "太贵", C: "暴露所有用户数据，阻碍现实世界的商业使用", D: "太复杂" }, answer: "C", status: 'unanswered' },
            { id: 12, q: "Rialo 的隐私功能对企业的一个关键好处是什么？", options: { A: "更低的税收", B: "更快的交易", C: "在链上保护敏感的商业数据", D: "免费营销" }, answer: "C", status: 'unanswered' },
            { id: 13, q: "“机密计算 (Confidential Computation)” 允许做什么？", options: { A: "更快的挖矿", B: "在不泄露数据本身的情况下处理数据", C: "更便宜的存储", D: "更多节点" }, answer: "B", status: 'unanswered' },
            { id: 14, q: "Rialo 如何看待隐私与合规之间的关系？", options: { A: "它们是对立的", B: "隐私使更好、更有选择性的合规成为可能", C: "合规是不必要的", D: "隐私是非法的" }, answer: "B", status: 'unanswered' },
            { id: 15, q: "“验证者 (Validators)” 在 Rialo 中扮演什么角色？", options: { A: "仅推广项目", B: "保护网络安全并处理机密交易", C: "仅持有代币", D: "开发 DApp" }, answer: "B", status: 'unanswered' },
            { id: 16, q: "“测试网 (Testnet)” 阶段的意义是什么？", options: { A: "它是最终产品", B: "用于在涉及真金白银之前测试功能和发现 Bug", C: "没用", D: "仅用于营销" }, answer: "B", status: 'unanswered' },
            { id: 17, q: "为什么开发者工具对 Rialo 很重要？", options: { A: "不重要", B: "让建设者容易创建保护隐私的 DApp", C: "为了提高币价", D: "减少开发者数量" }, answer: "B", status: 'unanswered' },
            { id: 18, q: "在此语境下，“Web3” 指的是什么？", options: { A: "新浏览器", B: "建立在区块链上的去中心化互联网", C: "社交媒体平台", D: "电子游戏" }, answer: "B", status: 'unanswered' },
            { id: 19, q: "什么是 “DApp”？", options: { A: "中心化应用", B: "运行在区块链上的去中心化应用", C: "桌面应用", D: "手机" }, answer: "B", status: 'unanswered' },
            { id: 20, q: "Rialo 现实世界整合的长期目标是什么？", options: { A: "完全取代法币", B: "以隐私为桥梁，连接传统金融/数据与区块链", C: "做一个小众产品", D: "仅服务于加密交易者" }, answer: "B", status: 'unanswered' },
            { id: 21, q: "在 Rialo 的更新中，Harry Halpin 是谁？", options: { A: "NFT 艺术家", B: "与隐私哲学相关的关键人物", C: "竞争对手", D: "监管者" }, answer: "B", status: 'unanswered' },
            { id: 22, q: "Harry Halpin 关于隐私的主要观点是什么？", options: { A: "它是为了罪犯", B: "它过时了", C: "它是人类自由的基础", D: "它太贵了" }, answer: "C", status: 'unanswered' },
            { id: 23, q: "Halpin 如何看待当前的互联网隐私状况？", options: { A: "完美", B: "已迷失方向，变成了监控工具", C: "太私密了", D: "无所谓" }, answer: "B", status: 'unanswered' },
            { id: 24, q: "什么是 “赛博朋克 (Cypherpunk)” 运动？", options: { A: "一种摇滚风格", B: "倡导使用强加密和隐私作为社会变革手段的行动者", C: "黑客组织", D: "政府机构" }, answer: "B", status: 'unanswered' },
            { id: 25, q: "Rialo 如何契合赛博朋克理念？", options: { A: "不契合", B: "通过构建数字隐私和自治的工具", C: "通过促进中心化", D: "通过反对加密" }, answer: "B", status: 'unanswered' },
            { id: 26, q: "完全透明的区块链对个人有什么危险？", options: { A: "没有危险", B: "金融监控和个人隐私丧失", C: "交易更快", D: "朋友更多" }, answer: "B", status: 'unanswered' },
            { id: 27, q: "加密领域的 “自我主权 (Self-sovereignty)” 是什么意思？", options: { A: "国王统治国家", B: "完全控制和拥有自己的数据及资产", C: "依赖银行", D: "没有控制权" }, answer: "B", status: 'unanswered' },
            { id: 28, q: "为什么隐私对于真正的自我主权是必要的？", options: { A: "不必要", B: "如果一举一动都被监控，就不可能主权独立", C: "隐私使其更难", D: "自我主权是神话" }, answer: "B", status: 'unanswered' },
            { id: 29, q: "Rialo 反对的 “监控资本主义” 模式是什么？", options: { A: "出售商品获利", B: "未经同意通过收集和货币化用户数据获利", C: "带摄像头的资本主义", D: "一种模式" }, answer: "B", status: 'unanswered' },
            { id: 30, q: "Rialo 对数字经济未来的哲学立场是什么？", options: { A: "应完全公开", B: "应中心化", C: "必须建立在隐私基础之上才能自由开放", D: "无所谓" }, answer: "C", status: 'unanswered' },
            { id: 31, q: "Rialo 技术栈中的 “ACE” 代表什么？", options: { A: "Advanced Crypto Engine", B: "Advanced Computation Engine (高级计算引擎)", C: "Another Computation Engine", D: "All Chain Engine" }, answer: "B", status: 'unanswered' },
            { id: 32, q: "ACE 的主要功能是什么？", options: { A: "存储 NFT", B: "执行机密计算", C: "加速交易", D: "降低 Gas 费" }, answer: "B", status: 'unanswered' },
            { id: 33, q: "哪种加密技术通常不与 ACE 的目标相关？", options: { A: "零知识证明 (ZKPs)", B: "多方计算 (MPC)", C: "全同态加密 (FHE)", D: "明文存储" }, answer: "D", status: 'unanswered' },
            { id: 34, q: "零知识证明 (ZKPs) 允许做什么？", options: { A: "证明你知道某事而不透露该事物的具体内容", B: "透露一切", C: "什么都不知道", D: "什么都不证明" }, answer: "A", status: 'unanswered' },
            { id: 35, q: "多方计算 (MPC) 的一个关键优势是什么？", options: { A: "更快", B: "多方可以共同计算数据而不看到彼此的输入", C: "更慢", D: "需要受信任的第三方" }, answer: "B", status: 'unanswered' },
            { id: 36, q: "什么是全同态加密 (FHE)？", options: { A: "标准加密", B: "允许在不解密的情况下对加密数据进行计算", C: "弱加密", D: "已破解的加密" }, answer: "B", status: 'unanswered' },
            { id: 37, q: "为什么 Rialo 使用这些技术的组合 (ZK, MPC, FHE)？", options: { A: "听起来复杂", B: "因为没有单一技术能高效解决所有隐私挑战", C: "不使用组合", D: "为了增加成本" }, answer: "B", status: 'unanswered' },
            { id: 38, q: "什么是 “可信执行环境 (TEE)”？", options: { A: "处理器内部用于保护处理中数据的安全区域", B: "律师办公室", C: "开源软件", D: "云服务器" }, answer: "A", status: 'unanswered' },
            { id: 39, q: "Rialo 可能如何利用 TEE？", options: { A: "不会利用", B: "作为机密任务的额外硬件级安全层", C: "取代密码学", D: "减慢网络速度" }, answer: "B", status: 'unanswered' },
            { id: 40, q: "ACE 的最终技术目标是什么？", options: { A: "成为最快的区块链", B: "为隐私 DApp 提供通用、可扩展的平台", C: "仅支持简单转账", D: "与其他链不兼容" }, answer: "B", status: 'unanswered' },
            { id: 41, q: "Rialo 在供应链管理中的潜在用例是什么？", options: { A: "跟踪公共货物", B: "合作伙伴间共享敏感数据（如价格、来源）而不向竞争对手透露", C: "没用", D: "仅用于跟踪 NFT" }, answer: "B", status: 'unanswered' },
            { id: 42, q: "Rialo 如何造福医疗数据领域？", options: { A: "公开所有记录", B: "允许研究人员之间安全、私密地共享患者数据而不暴露身份", C: "无法造福", D: "出售患者数据" }, answer: "B", status: 'unanswered' },
            { id: 43, q: "什么是 “隐私 DeFi”？", options: { A: "没人能用的 DeFi", B: "隐藏交易细节（金额、交易者）的去中心化金融应用", C: "中心化金融", D: "普通 DeFi" }, answer: "B", status: 'unanswered' },
            { id: 44, q: "Rialo 如何实现隐私投票/治理？", options: { A: "显示谁投了什么", B: "使用 ZKP 证明选票有效而不透露选择内容", C: "无法实现", D: "使用纸质选票" }, answer: "B", status: 'unanswered' },
            { id: 45, q: "什么是 “选择性披露 (Selective Disclosure)”？", options: { A: "透露一切", B: "什么都不透露", C: "能够选择具体透露什么信息以及向谁透露", D: "随机披露" }, answer: "C", status: 'unanswered' },
            { id: 46, q: "Rialo 如何帮助身份验证 (KYC)？", options: { A: "将 ID 存储在公共服务器上", B: "允许用户证明关于自己的事实（如年满18岁）而不出示 ID 文件", C: "使 KYC 不可能", D: "使用假 ID" }, answer: "B", status: 'unanswered' },
            { id: 47, q: "Rialo 上的隐私拍卖有什么好处？", options: { A: "没有好处", B: "竞标者可以出价而不让其他人知道金额，防止抢跑", C: "拍卖变慢", D: "拍卖变中心化" }, answer: "B", status: 'unanswered' },
            { id: 48, q: "Rialo 如何支持隐私游戏？", options: { A: "不支持", B: "通过启用链上“战争迷雾”或隐藏游戏状态等功能", C: "使游戏变慢", D: "仅支持单人游戏" }, answer: "B", status: 'unanswered' },
            { id: 49, q: "什么是 “MEV” (最大可提取价值)？", options: { A: "新代币", B: "矿工/验证者通过重新排序区块中的交易获得的利润", C: "共识机制", D: "隐私功能" }, answer: "B", status: 'unanswered' },
            { id: 50, q: "Rialo 的交易隐私如何帮助减轻 MEV？", options: { A: "增加 MEV", B: "通过隐藏交易细节，防止机器人看到并抢跑交易", C: "没帮助", D: "鼓励 MEV" }, answer: "B", status: 'unanswered' },
            { id: 51, q: "Jan Camenisch 是谁？", options: { A: "市场经理", B: "团队/顾问中列出的著名密码学家和隐私专家", C: "社区版主", D: "未知" }, answer: "B", status: 'unanswered' },
            { id: 52, q: "为什么 Jan Camenisch 的参与很重要？", options: { A: "不重要", B: "为 Rialo 的密码学增加了巨大的技术可信度和专业知识", C: "他是著名交易员", D: "他是政客" }, answer: "B", status: 'unanswered' },
            { id: 53, q: "什么是 “Subzero Labs”？", options: { A: "冷冻食品公司", B: "Rialo 核心技术背后的开发实验室/公司", C: "竞争对手", D: "风险投资基金" }, answer: "B", status: 'unanswered' },
            { id: 54, q: "Rialo 的 “研究优先 (research-first)” 方法意味着什么？", options: { A: "只做研究，不构建", B: "在实施前优先考虑严谨的学术研究和密码学证明", C: "营销术语", D: "忽略研究" }, answer: "B", status: 'unanswered' },
            { id: 55, q: "为什么学术严谨性在密码学中很重要？", options: { A: "不重要", B: "如果密码学没有经过适当审查和证明，可能会有灾难性漏洞", C: "只是做样子", D: "这会让事情变慢" }, answer: "B", status: 'unanswered' },
            { id: 56, q: "社区在 Rialo 生态系统中的角色是什么？", options: { A: "仅购买代币", B: "被动观察者", C: "测试、反馈、治理和宣传项目", D: "无角色" }, answer: "C", status: 'unanswered' },
            { id: 57, q: "活跃的 Twitter 存在说明了项目什么？", options: { A: "没什么", B: "他们积极与社区互动并提供更新", C: "他们是机器人", D: "他们在躲藏" }, answer: "B", status: 'unanswered' },
            { id: 58, q: "“社区电话会议 (Community calls)” 的目的是什么？", options: { A: "推销代币", B: "团队直接提供更新并回答社区问题", C: "浪费时间", D: "让社区闭嘴" }, answer: "B", status: 'unanswered' },
            { id: 59, q: "开发者如何参与 Rialo？", options: { A: "无法参与", B: "通过使用测试网、水龙头和文档构建 DApp", C: "通过购买代币", D: "通过黑客攻击" }, answer: "B", status: 'unanswered' },
            { id: 60, q: "强大的团队背景对投资者/用户意味着什么？", options: { A: "保证盈利", B: "技术执行和项目可持续性的可能性更高", C: "没什么", D: "更多风险" }, answer: "B", status: 'unanswered' },
            { id: 61, q: "区块链中的 “互操作性 (Interoperability)” 是什么？", options: { A: "单一区块链统治所有", B: "不同区块链之间通信和交换数据/资产的能力", C: "区块链互相攻击", D: "无通信" }, answer: "B", status: 'unanswered' },
            { id: 62, q: "为什么互操作性对 Rialo 很重要？", options: { A: "不重要", B: "使其隐私功能可以在更广泛的加密生态中使用，而不仅仅是在自己的链上", C: "为了与比特币合并", D: "降低其价值" }, answer: "B", status: 'unanswered' },
            { id: 63, q: "加密领域的 “桥 (Bridge)” 是什么？", options: { A: "实体桥", B: "连接两个不同区块链的协议", C: "一堵墙", D: "一种代币" }, answer: "B", status: 'unanswered' },
            { id: 64, q: "隐私桥与标准桥有何不同？", options: { A: "没有不同", B: "它会掩盖跨链转移资产的细节", C: "更慢", D: "更贵" }, answer: "B", status: 'unanswered' },
            { id: 65, q: "什么是 “Cosmos IBC” (跨链通信)？", options: { A: "新代币", B: "Cosmos 链之间互操作性的标准协议", C: "中心化服务器", D: "钱包" }, answer: "B", status: 'unanswered' },
            { id: 66, q: "鉴于 Keplr 的集成，Rialo 可能属于哪个生态？", options: { A: "仅以太坊", B: "仅 Solana", C: "Cosmos 生态系统", D: "仅比特币" }, answer: "C", status: 'unanswered' },
            { id: 67, q: "什么是 “可扩展性 (Scalability)”？", options: { A: "使东西更重", B: "网络处理增长的工作量（交易）而不减速的能力", C: "使东西变小", D: "减少用户" }, answer: "B", status: 'unanswered' },
            { id: 68, q: "为什么机密计算通常对可扩展性具有挑战性？", options: { A: "并不具挑战性", B: "密码学操作（如 ZK 或 FHE）计算量大且慢", C: "太快了", D: "需要更少电力" }, answer: "B", status: 'unanswered' },
            { id: 69, q: "ACE 如何应对可扩展性挑战？", options: { A: "忽略它", B: "通过优化密码引擎并可能使用专用硬件 (TEE)", C: "变得中心化", D: "减少隐私" }, answer: "B", status: 'unanswered' },
            { id: 70, q: "隐私与性能之间的传统权衡是什么？", options: { A: "没有权衡", B: "更高的隐私通常意味着更低的性能（速度/成本）", C: "更高的隐私意味着更高的性能", D: "无关" }, answer: "B", status: 'unanswered' },
            { id: 71, q: "“主网 (Mainnet)” 是什么意思？", options: { A: "测试网络", B: "交易真实价值的实时公共区块链", C: "私有网络", D: "开发者工具" }, answer: "B", status: 'unanswered' },
            { id: 72, q: "主网上线时，测试网代币通常会发生什么？", options: { A: "变成真钱", B: "通常变得一文不值，不会转移到主网", C: "价值翻倍", D: "被销毁" }, answer: "B", status: 'unanswered' },
            { id: 73, q: "什么是 “代币经济学 (Tokenomics)”？", options: { A: "关于代币的书", B: "代币的经济模型和设计（供应、分配、效用）", C: "交易代币", D: "挖矿代币" }, answer: "B", status: 'unanswered' },
            { id: 74, q: "为什么代币符号的决定很重要？", options: { A: "不重要", B: "它是交易所和追踪器上使用的品牌标识", C: "它决定价格", D: "只是字母" }, answer: "B", status: 'unanswered' },
            { id: 75, q: "Coinbase 的提及对项目意味着什么？", options: { A: "没什么", B: "高曝光度、可信度和未来上市的潜力", C: "是骗局", D: "将被下架" }, answer: "B", status: 'unanswered' },
            { id: 76, q: "什么是 “质押 (Staking)”？", options: { A: "吸血鬼猎人", B: "锁定代币以支持网络安全并获得奖励", C: "出售代币", D: "销毁代币" }, answer: "B", status: 'unanswered' },
            { id: 77, q: "在 Rialo 这样的隐私网络中，质押如何运作？", options: { A: "公开的", B: "质押金额或奖励可能会被保密", C: "不允许质押", D: "仅验证者质押" }, answer: "B", status: 'unanswered' },
            { id: 78, q: "什么是 “白皮书 (Whitepaper)”？", options: { A: "白纸", B: "解释加密项目技术、目的和经济模型的详细文档", C: "营销传单", D: "法律合同" }, answer: "B", status: 'unanswered' },
            { id: 79, q: "在哪里可以找到 ACE 的技术细节？", options: { A: "仅在 Twitter", B: "在项目的白皮书或技术文档中", C: "在 TikTok", D: "找不到" }, answer: "B", status: 'unanswered' },
            { id: 80, q: "加密领域的 “审计 (Audit)” 是什么？", options: { A: "税务检查", B: "第三方公司对代码进行安全审查以发现漏洞", C: "绩效评估", D: "社区投票" }, answer: "B", status: 'unanswered' },
            { id: 81, q: "为什么审计对隐私项目至关重要？", options: { A: "不重要", B: "因为隐私代码中的漏洞可能是灾难性的且难以检测", C: "很便宜", D: "推迟发布" }, answer: "B", status: 'unanswered' },
            { id: 82, q: "什么是 “监管环境”？", options: { A: "一幅画", B: "政府适用于加密货币的法律和规则的现状", C: "实体土地", D: "没有规则" }, answer: "B", status: 'unanswered' },
            { id: 83, q: "Rialo 的技术如何帮助符合 GDPR 等法规？", options: { A: "违反它们", B: "通过允许数据最小化和用户控制，符合隐私设计原则", C: "忽略它们", D: "使合规更难" }, answer: "B", status: 'unanswered' },
            { id: 84, q: "早期提到的 “投机资本循环” 的风险是什么？", options: { A: "没有风险", B: "制造泡沫而不创造现实价值或采用", C: "对经济有益", D: "稳定价格" }, answer: "B", status: 'unanswered' },
            { id: 85, q: "Rialo 成功的最终衡量标准是什么？", options: { A: "仅代币价格", B: "其隐私基础设施在现实世界应用中的广泛采用", C: "Twitter 粉丝数", D: "被埃隆·马斯克提及" }, answer: "B", status: 'unanswered' }
        ];

        // ===========================================
        // 2. 进度管理
        // ===========================================
        const STORE_KEY = "rialo_v5_refined_cn";
        function saveProgress() {
            try { localStorage.setItem(STORE_KEY, JSON.stringify(questionData.map(q => ({id:q.id, status:q.status, sw:q.selectedWrong})))); } catch(e){}
        }
        function loadProgress() {
            try {
                const raw = localStorage.getItem(STORE_KEY);
                if(!raw) return;
                const arr = JSON.parse(raw);
                const map = new Map(arr.map(x=>[x.id,x]));
                questionData.forEach(q => {
                    const s = map.get(q.id);
                    if(s) { q.status = s.status||'unanswered'; q.selectedWrong = s.sw; }
                });
            } catch(e){}
        }
        let stats = { correct:0, wrong:0, total:85 };
        function recomputeStats(){
            stats.correct = questionData.filter(q=>q.status==='correct').length;
            stats.wrong = questionData.filter(q=>q.status==='wrong').length;
            updateHUD();
        }

        // ===========================================
        // 3. 纹理与材质 (只保留 Galaxy 配色)
        // ===========================================
        const PALETTES = {
            galaxy: { u:['#7855ff','#2dd2ff'], c:['#46ffdc','#78ffaa'], w:['#ff5fbe','#ff965a'] }
        };
        let curPal = 'galaxy';
        
        function createHyperGlowTexture(c1, c2) {
            const size = 256; 
            const canvas = document.createElement('canvas'); canvas.width=size; canvas.height=size;
            const ctx = canvas.getContext('2d');
            const c = size/2;
            const g = ctx.createRadialGradient(c,c,0,c,c,c);
            g.addColorStop(0, 'rgba(255,255,255,1)');    
            g.addColorStop(0.15, 'rgba(255,255,255,0.9)'); 
            g.addColorStop(0.3, c1);
            g.addColorStop(0.6, c2);
            g.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle=g; ctx.fillRect(0,0,size,size);
            return new THREE.CanvasTexture(canvas);
        }
        
        function createFlareTexture() {
            const size = 128;
            const canvas = document.createElement('canvas'); canvas.width=size; canvas.height=size;
            const ctx = canvas.getContext('2d');
            const c = size/2;
            ctx.shadowBlur = 8; 
            ctx.shadowColor = "white";
            ctx.strokeStyle = "rgba(255,255,255,0.9)";
            ctx.lineWidth = 2; 
            ctx.beginPath();
            ctx.moveTo(0, c); ctx.lineTo(size, c); 
            ctx.moveTo(c, 0); ctx.lineTo(c, size); 
            ctx.stroke();
            const g = ctx.createRadialGradient(c,c,0,c,c,c);
            g.addColorStop(0, 'rgba(255,255,255,0.8)');
            g.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = g;
            ctx.fillRect(0,0,size,size);
            return new THREE.CanvasTexture(canvas);
        }
        const flareTex = createFlareTexture();
        
        function createCoreTexture() {
            const c = document.createElement('canvas'); c.width=64; c.height=64;
            const ctx = c.getContext('2d');
            const g = ctx.createRadialGradient(32,32,0,32,32,32);
            g.addColorStop(0,'rgba(255,255,255,1)');
            g.addColorStop(0.5,'rgba(255,255,255,0.8)');
            g.addColorStop(1,'rgba(0,0,0,0)');
            ctx.fillStyle=g; ctx.fillRect(0,0,64,64);
            return new THREE.CanvasTexture(c);
        }
        const coreTex = createCoreTexture();

        // ===========================================
        // 4. 3D 图谱初始化
        // ===========================================
        loadProgress();
        recomputeStats();

        const Graph = ForceGraph3D()(document.getElementById('3d-graph'))
            .graphData({ nodes: questionData, links: [] }) 
            .nodeLabel(n => `节点 #${n.id}`) 
            .backgroundColor('rgba(0,0,0,0)') 
            .showNavInfo(false)
            .nodeThreeObject(node => {
                const p = PALETTES[curPal];
                let colors = p.u;
                if(node.status==='correct') colors = p.c;
                if(node.status==='wrong') colors = p.w;

                const group = new THREE.Group();
                const glowSize = 100; 
                const glowMat = new THREE.SpriteMaterial({ 
                    map: createHyperGlowTexture(colors[0], colors[1]), 
                    depthWrite: false, 
                    blending: THREE.AdditiveBlending,
                    opacity: 0.5 
                });
                const glow = new THREE.Sprite(glowMat);
                glow.scale.set(glowSize, glowSize, 1);
                group.add(glow);
                
                const flareSize = 100; 
                const flareMat = new THREE.SpriteMaterial({
                    map: flareTex,
                    depthWrite: false,
                    blending: THREE.AdditiveBlending,
                    opacity: 0.30,
                    rotation: Math.random() * Math.PI 
                });
                const flare = new THREE.Sprite(flareMat);
                flare.scale.set(flareSize, flareSize, 1);
                group.add(flare);

                const coreSize = 14;
                const coreMat = new THREE.SpriteMaterial({ 
                    map: coreTex, 
                    depthWrite: false,
                    blending: THREE.AdditiveBlending,
                    opacity: 1.0 
                });
                const core = new THREE.Sprite(coreMat);
                core.scale.set(coreSize, coreSize, 1);
                group.add(core);

                group.userData = { glow, flare, core, baseGlow: glowSize, baseFlare: flareSize, baseCore: coreSize }; 
                return group;
            })
            .onNodeClick(node => openPanel(node.id));

        Graph.d3Force('charge').strength(-180); 

        // ===========================================
        // 5. 拓扑星尘
        // ===========================================
        let interStars = null;
        function createInterstitialStars() {
            const nodes = Graph.graphData().nodes;
            const hasCoords = nodes.length > 0 && (nodes[0].x !== undefined && nodes[0].x !== 0);
            const getPos = () => {
                if(!hasCoords) {
                    const r = 300 * Math.cbrt(Math.random());
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.acos(2*Math.random()-1);
                    return [r*Math.sin(phi)*Math.cos(theta), r*Math.sin(phi)*Math.sin(theta), r*Math.cos(phi)];
                } else {
                    const n1 = nodes[Math.floor(Math.random()*nodes.length)];
                    const n2 = nodes[Math.floor(Math.random()*nodes.length)];
                    const t = Math.random();
                    const cx = n1.x + (n2.x - n1.x)*t;
                    const cy = n1.y + (n2.y - n1.y)*t;
                    const cz = n1.z + (n2.z - n1.z)*t;
                    const spread = 120; 
                    return [cx + (Math.random()-0.5)*spread, cy + (Math.random()-0.5)*spread, cz + (Math.random()-0.5)*spread];
                }
            };
            const group = new THREE.Group();
            function addLayer(count, size, opacity, colorRange) {
                const geo = new THREE.BufferGeometry();
                const pos = []; const cols = [];
                for(let i=0; i<count; i++){
                    pos.push(...getPos());
                    const mix = Math.random();
                    const c = mix < 0.5 ? colorRange[0] : colorRange[1];
                    cols.push(c.r, c.g, c.b);
                }
                geo.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
                geo.setAttribute('color', new THREE.Float32BufferAttribute(cols, 3));
                const mat = new THREE.PointsMaterial({
                    size: size, vertexColors: true, map: coreTex, transparent: true,
                    opacity: opacity, depthWrite: false, blending: THREE.AdditiveBlending
                });
                return new THREE.Points(geo, mat);
            }
            const cBlue = new THREE.Color(0x66ccff), cPurp = new THREE.Color(0xaa66ff), cWhite = new THREE.Color(0xffffff);
            const dust = addLayer(350000, 1, 0.5, [cBlue, cPurp]);
            const med = addLayer(48000, 3.0, 0.5, [cBlue, cWhite]);
            const bri = addLayer(8000, 8, 0.5, [cWhite, cPurp]);
            group.add(dust, med, bri);
            group.userData = { dust, med, bri };
            return group;
        }

        interStars = createInterstitialStars();
        Graph.scene().add(interStars);

        Graph.onEngineStop(() => {
            Graph.scene().remove(interStars);
            interStars = createInterstitialStars();
            Graph.scene().add(interStars);
            document.getElementById('loading').style.opacity = 0;
            setTimeout(()=>document.getElementById('loading').style.display='none', 1000);
        });

        // ===========================================
        // 6. 动画
        // ===========================================
        let time = 0;
        function animate() {
            time += 0.01;
            requestAnimationFrame(animate);
            if(interStars && interStars.userData) {
                const u = interStars.userData;
                if(u.dust) u.dust.material.opacity = 0.15 + 0.05 * Math.sin(time*0.5);
                if(u.med) u.med.material.opacity = 0.3 + 0.1 * Math.sin(time*1.2);
                if(u.bri) u.bri.material.opacity = 0.6 + 0.2 * Math.sin(time*2.0);
                interStars.rotation.y = time * 0.01;
            }
            const cam = Graph.camera();
            const controls = Graph.controls();
            if(controls) {
                const dist = cam.position.distanceTo(controls.target);
                const scaleFactor = Math.max(0.4, Math.min(2.0, 800 / dist));
                Graph.graphData().nodes.forEach(node => {
                    if(node.__threeObj && node.__threeObj.userData) {
                        const ud = node.__threeObj.userData;
                        if(ud.glow) ud.glow.scale.setScalar(ud.baseGlow * scaleFactor);
                        if(ud.flare) { ud.flare.scale.setScalar(ud.baseFlare * scaleFactor); ud.flare.material.rotation += 0.005; }
                        if(ud.core) ud.core.scale.setScalar(ud.baseCore * scaleFactor);
                    }
                });
            }
        }
        animate();

        // ===========================================
        // 7. 交互
        // ===========================================
        const panel = document.getElementById('panel');
        function openPanel(id) {
            const data = questionData.find(q => q.id === id);
            if(!data) return;
            document.getElementById('panel-id').textContent = `节点信号 #${id}`;
            document.getElementById('panel-q').textContent = data.q;
            document.getElementById('panel-opts').innerHTML = '';
            document.getElementById('feedback').style.opacity = 0;
            
            Object.entries(data.options).forEach(([k,v]) => {
                const btn = document.createElement('div');
                btn.className = `opt-btn ${data.status==='correct'?'disabled':''} ${data.status==='wrong'&&data.selectedWrong===k?'wrong disabled':''}`;
                if(data.status==='correct' && data.answer===k) btn.classList.add('correct');
                btn.innerHTML = `<b style="color:#00f3ff;margin-right:8px">${k}</b> ${v}`;
                btn.onclick = () => handleAns(k, data, btn);
                document.getElementById('panel-opts').appendChild(btn);
            });
            panel.classList.add('active');
        }

        function handleAns(k, data, btn) {
            if(k === data.answer) {
                const isRecovery = data.status === 'wrong';
                data.status = 'correct';
                showFeedback(true, isRecovery ? "节点已恢复" : "访问许可");
                if(isRecovery) stats.wrong--;
            } else {
                if(data.status !== 'wrong') { data.status = 'wrong'; stats.wrong++; }
                data.selectedWrong = k;
                showFeedback(false, "拒绝访问");
            }
            saveProgress();
            recomputeStats();
            Graph.nodeThreeObject(Graph.nodeThreeObject());
            openPanel(data.id);
        }

        function showFeedback(win, txt) {
            const f = document.getElementById('feedback');
            f.textContent = txt;
            f.className = win ? (txt.includes('恢复')?'fb-recover':'fb-win') : 'fb-lose';
            f.style.opacity = 1;
        }
        function closePanel() { panel.classList.remove('active'); }
        function updateHUD() {
            document.getElementById('val-blue').textContent = stats.total - stats.correct - stats.wrong;
            document.getElementById('val-green').textContent = stats.correct;
            document.getElementById('val-red').textContent = stats.wrong;
            document.getElementById('progress-bar').style.width = `${(stats.correct/stats.total)*100}%`;
        }
        
        document.getElementById('reset-progress').onclick = () => { if(confirm('确定要重置所有进度吗？')) { localStorage.removeItem(STORE_KEY); location.reload(); } };
        window.addEventListener('resize', () => { Graph.width(window.innerWidth); Graph.height(window.innerHeight); });
    </script>
</body>
</html>
